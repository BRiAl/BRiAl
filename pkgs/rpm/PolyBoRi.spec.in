# spec file for package PolyBoRi (Version $PBVERSION)
#
# Copyright (c) 2008-2011 The PolyBoRi Team
# This file and all modifications and additions to the pristine
# package are under the same license as the package itself.
#
# Please submit bug fixes or comments via http://polybori.sourceforge.net
#
# norootforbuild

BuildRequires: scons boost-devel gcc gcc-c++ python-devel doxygen
 
Summary: Framework for Boolean Rings
Name: PolyBoRi
Version: $PBVERSION.$PBRELEASE
Release: 0
License: GPLv2+
Group: Applications/Engineering
URL: http://polybori.sf.net
Source0: %{name}-%{version}.tar.bz2
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
Requires: python-%{name} = %{version}-%{release}
Requires: IPython >= 0.6

%define pbori_prefix %{_prefix}
%define pbori_pyprefix %{py_prefix}
%define pbori_pyinstprefix %{py_sitedir}
%define pbori_eprefix %{_bindir}
 
%define pbori_instdir %{_datadir}/%{name}
%define pbori_docpath %{_defaultdocdir}/%{_docdir_fmt}
%define pbori_tmpdoc docs

%description
PolyBoRi is a special purpose computer algebra system for computations in
Boolean Rings. The core is a C++ library, which provides high-level data types
for Boolean polynomials and related structures. As a unique approach, binary
decision diagrams are used as internal storage type for polynomial
structures. On top of this, we provide a Python interface for parsing of
complex polynomial systems, as well as for sophisticated and extendable
strategies for Groebner base computation.
 
%package doc
Summary: Documentation package for %{name}
Group: Documentation
Requires: locales-doc
Requires: %{name} = %{version}

%description doc
This package contains the documentation and tutorial of %{name}.

%package -n python-%{name}
Summary: Python core package for %{name} 
Group: Applications/Engineering
Requires: python-base = %{py_ver}

%description -n python-%{name}
This package contains the python core routines of %{name}.

%prep
%setup -q
 
%build
scons %{?jobs:-j%jobs} prepare-install

%install
scons install EPREFIX=$RPM_BUILD_ROOT/%{pbori_eprefix} \
              PYINSTALLPREFIX=$RPM_BUILD_ROOT/%{pbori_pyinstprefix} \
              INSTALLDIR=$RPM_BUILD_ROOT/%{pbori_instdir} \
              PYPREFIX=%{pbori_pyprefix} PYTHON=%{__python} \
              DOCDIR=$RPM_BUILD_ROOT/%{pbori_docpath} \
              MANDIR=$RPM_BUILD_ROOT/%{_mandir}
 
# rpm likes to copy docs (not to be installed), but install needs correct DOCDIR
%__mv $RPM_BUILD_ROOT/%{pbori_docpath} %{pbori_tmpdoc}
 
%clean
rm -rf $RPM_BUILD_ROOT


%files
%defattr(-,root,root,-)
%attr(755, root, root) %{pbori_eprefix}/ipbori
%attr(755, root, root) %{pbori_eprefix}/PolyGUI
%attr(644,root,man) %{_mandir}/man1/ipbori.1*
%{pbori_instdir}

%files -n python-%{name}
%defattr(-,root,root,-)
%{pbori_pyinstprefix}/polybori

%files doc
%defattr(-,root,root,-)
%doc README LICENSE ChangeLog %{pbori_tmpdoc}/*


%changelog
* Wed Apr 20 2011 Alexander Dreyer <adreyer@gmx.de> - 
- Updating SPEC file, added PolyGUI, splitted doc.
* Fri Jan 29 2010 Alexander Dreyer <adreyer@gmx.de> - 
- Updating sources (PolyBoRi 0.6-4).
* Tue Mar 31 2009 Alexander Dreyer <adreyer@gmx.de> - 
- Updating sources (PolyBoRi 0.6-0).
* Mon Jul 08 2008 Alexander Dreyer <adreyer@gmx.de> - 
- Updating sources (PolyBoRi 0.5-0).
* Sun May 04 2008 Alexander Dreyer <adreyer@gmx.de> - 
- Updating sources, adding man page (PolyBoRi 0.4-0).
* Thu Mar 13 2008 Alexander Dreyer <adreyer@gmx.de> - 
- Updating sources (PolyBoRi 0.3-1).
* Wed Mar 07 2008 Alexander Dreyer <adreyer@gmx.de> - 
- More standard-conforming rpm (PolyBoRi 0.3-0).
* Wed Feb 13 2008 Alexander Dreyer <adreyer@gmx.de> - 
- Initial build (PolyBoRi 0.2-0).
